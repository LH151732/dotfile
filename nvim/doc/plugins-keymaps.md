# 插件键位映射

## Bufferline (标签页管理)

> 文件: `plugins/bufferline.lua`

### 标签页导航

| 键位        | 功能         | 说明               |
| ----------- | ------------ | ------------------ |
| `Tab`       | 下一个标签页 | 切换到右边的标签页 |
| `Shift+Tab` | 上一个标签页 | 切换到左边的标签页 |

### 数字键快速切换

| 键位     | 功能        | 说明                  |
| -------- | ----------- | --------------------- |
| `Ctrl+1` | 转到标签页1 | 快速跳转到第1个标签页 |
| `Ctrl+2` | 转到标签页2 | 快速跳转到第2个标签页 |
| `Ctrl+3` | 转到标签页3 | 快速跳转到第3个标签页 |
| `Ctrl+4` | 转到标签页4 | 快速跳转到第4个标签页 |
| `Ctrl+5` | 转到标签页5 | 快速跳转到第5个标签页 |
| `Ctrl+6` | 转到标签页6 | 快速跳转到第6个标签页 |
| `Ctrl+7` | 转到标签页7 | 快速跳转到第7个标签页 |
| `Ctrl+8` | 转到标签页8 | 快速跳转到第8个标签页 |
| `Ctrl+9` | 转到标签页9 | 快速跳转到第9个标签页 |

### 标签页管理

| 键位         | 功能           | 说明                 |
| ------------ | -------------- | -------------------- |
| `<leader>tn` | 新建标签页     | 创建新的标签页       |
| `<leader>tc` | 关闭当前标签页 | 关闭当前标签页       |
| `<leader>to` | 关闭其他标签页 | 只保留当前标签页     |
| `<leader>tp` | 前一个标签页   | 切换到前一个标签页   |
| `<leader>tf` | 第一个标签页   | 跳转到第一个标签页   |
| `<leader>tl` | 最后一个标签页 | 跳转到最后一个标签页 |
| `<leader>tm` | 移动标签页     | 移动当前标签页位置   |

---

## Comment.nvim (注释插件)

> 文件: `plugins/common.lua`

### 基础注释功能

- **基本行注释**: 启用标准的行注释键位
- **块注释**: 启用额外的块注释键位
- **智能注释**: 根据文件类型和上下文自动选择注释风格

### JSX/TSX支持

- **JSX元素**: 自动使用 `{/*%s*/}` 格式
- **JSX属性**: 自动使用 `// %s` 格式

---

## Spectre (搜索替换)

> 文件: `plugins/common.lua`

### 主要功能

| 键位         | 功能        | 说明                 |
| ------------ | ----------- | -------------------- |
| `<leader>sr` | 打开Spectre | 项目范围内搜索和替换 |

### Spectre内部键位

| 键位 | 功能         | 说明                   |
| ---- | ------------ | ---------------------- |
| `t`  | 切换行       | 切换当前项目的选中状态 |
| `c`  | 输入替换命令 | 输入自定义替换命令     |
| `C`  | 替换当前行   | 只替换当前行           |
| `R`  | 替换所有     | 替换所有匹配项         |
| `o`  | 显示选项菜单 | 显示更多选项           |

---

## Zen Mode (专注模式)

> 文件: `plugins/common.lua`

| 键位        | 功能         | 说明                  |
| ----------- | ------------ | --------------------- |
| `<leader>z` | 切换专注模式 | 进入/退出专注写作模式 |

### 专注模式特性

- **窗口宽度**: 85%屏幕宽度
- **隐藏元素**: 行号、相对行号、标记列、当前行高亮
- **暗淡非活动代码**: 启用twilight插件效果
- **状态跟踪**: 设置 `vim.g.zen_mode_active` 变量

---

## nvim-ufo (代码折叠)

> 文件: `plugins/common.lua`

### 折叠操作

| 键位 | 功能         | 说明                 |
| ---- | ------------ | -------------------- |
| `zR` | 打开所有折叠 | 展开所有代码折叠     |
| `zM` | 关闭所有折叠 | 折叠所有代码         |
| `zr` | 打开部分折叠 | 除特定类型外展开折叠 |
| `zm` | 关闭部分折叠 | 关闭指定深度的折叠   |
| `zp` | 预览折叠内容 | 浮动窗口预览折叠内容 |

### 预览窗口内键位

| 键位     | 功能     | 说明                 |
| -------- | -------- | -------------------- |
| `Ctrl+u` | 向上滚动 | 在预览窗口中向上滚动 |
| `Ctrl+d` | 向下滚动 | 在预览窗口中向下滚动 |

---

## Refactoring (重构工具)

> 文件: `plugins/refactoring.lua`

### 增量重命名

| 键位         | 功能       | 说明               |
| ------------ | ---------- | ------------------ |
| `<leader>rn` | 增量重命名 | 实时预览重命名效果 |

### 重构菜单

| 键位        | 功能         | 说明                       |
| ----------- | ------------ | -------------------------- |
| `<leader>r` | 选择重构操作 | 在visual模式下显示重构菜单 |

---

## Neotest (测试框架)

> 文件: `plugins/neotest.lua`

### 测试执行

| 键位         | 功能           | 说明                   |
| ------------ | -------------- | ---------------------- |
| `<leader>t`  | 测试菜单       | 显示测试相关功能       |
| `<leader>tt` | 运行文件测试   | 运行当前文件的所有测试 |
| `<leader>tT` | 运行所有测试   | 运行项目中的所有测试   |
| `<leader>tr` | 运行最近的测试 | 运行光标附近的测试     |
| `<leader>tl` | 运行上次测试   | 重新运行上次执行的测试 |
| `<leader>tS` | 停止测试       | 停止正在运行的测试     |

### 测试界面

| 键位         | 功能         | 说明              |
| ------------ | ------------ | ----------------- |
| `<leader>ts` | 切换摘要     | 显示/隐藏测试摘要 |
| `<leader>to` | 显示输出     | 显示测试输出      |
| `<leader>tO` | 切换输出面板 | 切换输出面板显示  |
| `<leader>tw` | 切换监视     | 切换文件监视模式  |

---

## Outline (代码大纲)

> 文件: `plugins/outline.lua`

### 打开大纲

| 命令           | 功能         | 说明              |
| -------------- | ------------ | ----------------- |
| `:Outline`     | 切换大纲窗口 | 显示/隐藏代码大纲 |
| `:OutlineOpen` | 打开大纲窗口 | 强制打开大纲窗口  |

### 大纲内部操作

| 键位          | 功能       | 说明                 |
| ------------- | ---------- | -------------------- |
| `?`           | 显示帮助   | 显示快捷键帮助       |
| `q`, `Esc`    | 关闭大纲   | 关闭大纲窗口         |
| `Enter`       | 跳转到位置 | 跳转到符号定义位置   |
| `o`           | 预览位置   | 预览符号而不跳转     |
| `Shift+Enter` | 跳转并关闭 | 跳转到位置并关闭大纲 |
| `Ctrl+g`      | 恢复位置   | 恢复到之前的位置     |

### 符号操作

| 键位         | 功能       | 说明             |
| ------------ | ---------- | ---------------- |
| `Ctrl+Space` | 悬停符号   | 显示符号详细信息 |
| `K`          | 切换预览   | 切换预览窗口     |
| `r`          | 重命名符号 | 重命名当前符号   |
| `a`          | 代码操作   | 显示代码操作菜单 |

### 折叠操作

| 键位        | 功能         | 说明               |
| ----------- | ------------ | ------------------ |
| `h`         | 折叠         | 折叠当前项         |
| `l`         | 展开         | 展开当前项         |
| `Tab`       | 切换折叠     | 切换当前项折叠状态 |
| `Shift+Tab` | 切换所有折叠 | 切换所有项折叠状态 |
| `W`         | 折叠所有     | 折叠所有项目       |
| `E`         | 展开所有     | 展开所有项目       |
| `R`         | 重置折叠     | 重置折叠状态       |

### 导航操作

| 键位     | 功能     | 说明           |
| -------- | -------- | -------------- |
| `Ctrl+j` | 向下跳转 | 向下移动并跳转 |
| `Ctrl+k` | 向上跳转 | 向上移动并跳转 |

---

## Venv Selector (Python虚拟环境)

> 文件: `plugins/venv-selector.lua`

| 键位         | 功能         | 说明                            |
| ------------ | ------------ | ------------------------------- |
| `<leader>vs` | 选择虚拟环境 | 使用Telescope选择Python虚拟环境 |

### 功能特性

- **缓存虚拟环境**: 提高选择性能
- **自动激活**: 自动激活检测到的环境
- **终端集成**: 在终端中也激活虚拟环境
- **环境变量**: 自动设置相关环境变量
- **激活通知**: 切换环境时显示通知
- **DAP集成**: 触发调试器环境更新

---

## Claude Code AI

> 文件: `plugins/claude-code.lua`

### 窗口控制

| 键位         | 功能            | 说明                     |
| ------------ | --------------- | ------------------------ |
| `<leader>cc` | 切换Claude Code | 打开/关闭Claude Code界面 |
| `<leader>cf` | 浮动窗口        | 以浮动窗口形式打开       |
| `<leader>cs` | 分割窗口        | 以分割窗口形式打开       |
| `<leader>cr` | 重载缓冲区      | 重载当前缓冲区内容       |

### 用户命令

| 命令                | 功能            | 说明               |
| ------------------- | --------------- | ------------------ |
| `:ClaudeCode`       | 运行Claude Code | 切换或运行指定命令 |
| `:ClaudeCodeFloat`  | 浮动窗口        | 打开浮动窗口形式   |
| `:ClaudeCodeReload` | 重载缓冲区      | 重载当前缓冲区     |

### 预定义变体

- `continue`: 继续之前的对话
- `review`: 代码审查模式
- `test`: 测试模式

### 自动功能

- **文件监控**: 自动检测文件变化
- **Git集成**: 显示文件差异
- **自动刷新**: 保存和焦点变化时刷新
- **智能重载**: 检测外部修改并提供重载选项

